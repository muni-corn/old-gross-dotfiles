set {
    $mod Mod4
    $alt Mod1

    $dpmsoff "swaymsg 'output * dpms off'"
    $dpmson "swaymsg 'output * dpms on'"
    $gnome-desktop-schema org.gnome.desktop.interface
    $gnome-sound-schema org.gnome.desktop.sound
    $lockWarningCmd "notify-send -u low -t 29500 -- 'Are you still there?' 'Your system will lock itself soon.'"
    $notebook_dir $HOME/notebook
    $sans Inter
    $volume_down "$HOME/.nix-profile/sounds/musicaflight/stereo/VolumeDown.oga"
    $volume_up "$HOME/.nix-profile/share/sounds/musicaflight/stereo/Volume.oga"
    $bemenu_opts -H 32 --fn $sans 12 --tb '#0B0907' --tf '#cbc4a3' --fb '#0B0907' --ff '#f9fdff' --nb '#0B0907' --nf '#cbc4a3' --hb '#cbc4a3' --hf '#0B0907' --sb '#cbc4a3' --sf '#f9fdff' --scrollbar autohide -f -m all

    # apps
    $browser firefox
    $music spotify
    $email evolution
    $media "kodi --windowing=x11"
    $lock "sh $HOME/.config/sway/lock.sh"
    $screenshot $HOME/.config/sway/screenshot.fish
    $terminal kitty
    $shell fish

    # launcher
    $menu exec bemenu-run -p "Run what?" $bemenu_opts

    $exec_with_shell -e $shell -i -c
}

# window criteria
for_window {
    [title="Firefox â€” Sharing Indicator"] floating enable, resize set 64 px 32 px, move position 256 px -70 px, border csd
    [title="Page Unresponsive"] floating enable, resize set 600 px 400 px
    [app_id="^launcher$"] floating enable, sticky enable, resize set 30 ppt 60 ppt

    # disables swayidle for fullscreen windows
    [class=".*"] inhibit_idle fullscreen
}

set {
    # define names for default workspaces for which we configure key bindings later
    # on. we use variables to avoid repeating the names in multiple places.
    $ws1 "1"
    $ws2 "2"
    $ws3 "3"
    $ws4 "4"
    $ws5 "5"
    $ws6 "6"
    $ws7 "7"
    $ws8 "8"
    $ws9 "9"
    $ws10 "X"

    # custom colors
    $active       #cbc4a3e5
    $white        #f9fdff
    $silver       #d9dde3
    $black        #0B0907e5
    $gray         #2a2219e5
    $warning      #ffaa00e5
    $transparent  #00000000
}

# some options
default_border normal 6
default_orientation auto
floating_maximum_size 1856 x 1016
floating_minimum_size -1 x -1
floating_modifier $mod
title_align center
titlebar_padding 4
titlebar_border_thickness 4
xwayland force

# volume and brightness controls
bindsym --locked {
    XF86AudioLowerVolume exec "pamixer -d 5; muse-status notify volume; pw-play $volume_down; pamixer --get-volume > $SWAYSOCK.wob"
    --no-repeat XF86AudioRaiseVolume exec "pamixer -ui 5; muse-status notify volume; pw-play $volume_up; pamixer --get-volume > $SWAYSOCK.wob"
    --no-repeat XF86AudioMute exec "pamixer --toggle-mute; muse-status notify volume; pw-play $volume_up; pamixer --get-volume > $SWAYSOCK.wob"

    XF86MonBrightnessUp exec "brillo -q -A 2; muse-status notify brightness; brillo -G | cut -d'.' -f1 > $SWAYSOCK.wob"
    XF86MonBrightnessDown exec "brillo -q -U 2; muse-status notify brightness; brillo -G | cut -d'.' -f1 > $SWAYSOCK.wob"
}

# player controls
bindsym --locked --no-repeat {
    XF86AudioPlay exec mpc toggle || playerctl play-pause
    XF86AudioNext exec mpc next || playerctl next
    XF86AudioPrev exec mpc cdprev || playerctl previous
}

# screen capture
bindsym --release {
    $mod+Print exec $screenshot
    $mod+Control+Print exec $screenshot -s
    $mod+Control+$alt+Print exec $screenshot -o
    $mod+Shift+Print exec $HOME/.config/sway/videocapture.sh
}

bindsym {
}

# for laptop
output eDP-1 {
    pos 0 0
}

# for ponytower
output "Acer Technologies SB220Q 0x00007C0D" {
    pos 0 0
}
output "Acer Technologies SB220Q 0x000035FB" {
    pos 1920 0
}

# for all
output "*" {
    background "$HOME/.config/wpg/wallpapers/$(wpg -c)" fill
}

# (re)start wob
exec_always "killall wob; mkfifo $SWAYSOCK.wob; tail -f $SWAYSOCK.wob | wob -a bottom -H 24 -W 512 -M 256 -p 4 -o 0 -b 6 --border-color '#e52a2219' --bar-color '#ffcbc4a3' --background-color '#e50B0907'"

# this might let gammastep start correctly
exec systemctl --user import-environment
exec systemctl --user start graphical-session.target

# startup apps
exec {
    /run/current-system/sw/libexec/xdg-desktop-portal-wlr
    /run/current-system/sw/libexec/polkit-gnome-authentication-agent-1
    brillo -I
    mako
    muse-status-daemon
    pipewire
    pipewire-pulse
    swayidle -w timeout 270 $lockWarningCmd timeout 300 $lock timeout 315 $dpmsoff resume $dpmson before-sleep $lock
    syncthing --no-browser
    xhost si:localuser:root
    xrdb -load ~/.Xresources

    # login sound
    canberra-gtk-play --id=desktop-login
}

# vim: ft=conf
